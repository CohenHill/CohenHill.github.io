<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Learn programming concepts and techniques for FTC robotics with PID programming.">
    <title>FTC Programming - PID</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script>
        function switchCode(language) {
            document.querySelectorAll('.code-box pre').forEach(pre => pre.style.display = 'none');
            document.querySelectorAll('.switch-bar button').forEach(button => button.classList.remove('active'));
            document.querySelectorAll(`.${language}-code`).forEach(el => el.style.display = 'block');
            document.querySelectorAll(`.${language}-button`).forEach(btn => btn.classList.add('active'));
        }

        document.addEventListener('DOMContentLoaded', () => {
            switchCode('java');
        });
    </script>
</head>
<body class="pt-5">
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">FTC Programming</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="lessons.html">Lessons</a></li>
                </ul>
            </div>
            <div class="d-flex align-items-center">
                <div class="switch-bar me-3">
                    <button class="btn btn-outline-light java-button active" onclick="switchCode('java')">Java</button>
                    <button class="btn btn-outline-light kotlin-button" onclick="switchCode('kotlin')">Kotlin</button>
                </div>
                <button id="theme-toggle" class="btn btn-outline-light">☀</button>
            </div>
        </div>
    </nav>

    <main class="container mt-5">
        <header class="bg-primary text-white text-center py-4 rounded">
            <h1>Welcome to PID Programming</h1>
            <p>Learn what is a PID Controller and how to make your own</p>
        </header>

        <section class="mt-4">
            <h2>Watch a Video on PID Loops</h2>
            <div class="ratio ratio-16x9">
                <iframe src="https://www.youtube.com/embed/example_video_id" title="PID Loop Explanation" allowfullscreen></iframe>
            </div>
        </section>

        <section class="mt-4">
            <h2>What is a PID Loop?</h2>
            <p>
                A PID (Proportional-Integral-Derivative) loop is a control algorithm used in robotics to achieve precise control of motors or other actuators.
                In the context of FTC Robotics, PID loops are commonly used to maintain consistent speed, position, or orientation of a robot.
                By adjusting the proportional, integral, and derivative terms, teams can fine-tune their robot's behavior to respond effectively to changes in the environment.
            </p>
        </section>

        <section class="mt-4">
            <h2>How to Code a PID in the FTC Robot Controller</h2>
            <div class="code-box border rounded p-3 bg-light">
                <pre class="java-code" style="display: block;">
<code>
public class PIDController {
    private double kP, kI, kD;
    private double previousError = 0;
    private double integral = 0;

    public PIDController(double kP, double kI, double kD) {
        this.kP = kP;
        this.kI = kI;
        this.kD = kD;
    }

    public double calculate(double target, double current) {
        double error = target - current;
        integral += error;
        double derivative = error - previousError;
        previousError = error;
        return (kP * error) + (kI * integral) + (kD * derivative);
    }
}
</code>
                </pre>
                <pre class="kotlin-code" style="display: none;">
<code>
class PIDController(private val kP: Double, private val kI: Double, private val kD: Double) {
    private var previousError = 0.0
    private var integral = 0.0

    fun calculate(target: Double, current: Double): Double {
        val error = target - current
        integral += error
        val derivative = error - previousError
        previousError = error
        return (kP * error) + (kI * integral) + (kD * derivative)
    }
}
</code>
                </pre>
            </div>
        </section>

        <section class="mt-4">
            <h2>Step-by-Step Walkthrough of the PID Code</h2>

            <div class="accordion" id="pidWalkthrough">
                <!-- Step 1 -->
                <div class="accordion-item">
                    <h2 class="accordion-header" id="step1Header">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#step1" aria-expanded="true" aria-controls="step1">
                            Step 1: Define the PIDController Class
                        </button>
                    </h2>
                    <div id="step1" class="accordion-collapse collapse show" aria-labelledby="step1Header" data-bs-parent="#pidWalkthrough">
                        <div class="accordion-body">
                            <p>Start by defining the class that will encapsulate the PID logic.</p>
                            <div class="code-box border rounded p-3 bg-light">
                                <pre class="java-code" style="display: block;">
<code>
public class PIDController {
}
</code>
                                </pre>
                                <pre class="kotlin-code" style="display: none;">
<code>
class PIDController {
}
</code>
                                </pre>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 2 -->
                <div class="accordion-item">
                    <h2 class="accordion-header" id="step2Header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#step2" aria-expanded="false" aria-controls="step2">
                            Step 2: Declare Constants
                        </button>
                    </h2>
                    <div id="step2" class="accordion-collapse collapse" aria-labelledby="step2Header" data-bs-parent="#pidWalkthrough">
                        <div class="accordion-body">
                            <p>Declare constants for proportional, integral, and derivative terms.</p>
                            <div class="code-box border rounded p-3 bg-light">
                                <pre class="java-code" style="display: block;">
<code>
public class PIDController {
    private double kP, kI, kD;
}
</code>
                                </pre>
                                <pre class="kotlin-code" style="display: none;">
<code>
class PIDController(private val kP: Double, private val kI: Double, private val kD: Double) {
}
</code>
                                </pre>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Additional steps follow the same structure -->
                <!-- Step 3 -->
                <div class="accordion-item">
                    <h2 class="accordion-header" id="step3Header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#step3" aria-expanded="false" aria-controls="step3">
                            Step 3: Track Previous Error
                        </button>
                    </h2>
                    <div id="step3" class="accordion-collapse collapse" aria-labelledby="step3Header" data-bs-parent="#pidWalkthrough">
                        <div class="accordion-body">
                            <p>Track the previous error to calculate the derivative term.</p>
                            <div class="code-box border rounded p-3 bg-light">
                                <pre class="java-code" style="display: block;">
<code>
public class PIDController {
    private double kP, kI, kD;
    private double previousError = 0;
}
</code>
                                </pre>
                                <pre class="kotlin-code" style="display: none;">
<code>
class PIDController(private val kP: Double, private val kI: Double, private val kD: Double) {
    private var previousError = 0.0
}
</code>
                                </pre>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 4 -->
                <div class="accordion-item">
                    <h2 class="accordion-header" id="step4Header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#step4" aria-expanded="false" aria-controls="step4">
                            Step 4: Track Integral
                        </button>
                    </h2>
                    <div id="step4" class="accordion-collapse collapse" aria-labelledby="step4Header" data-bs-parent="#pidWalkthrough">
                        <div class="accordion-body">
                            <p>Track the integral of errors over time for the integral term.</p>
                            <div class="code-box border rounded p-3 bg-light">
                                <pre class="java-code" style="display: block;">
<code>
public class PIDController {
    private double kP, kI, kD;
    private double previousError = 0;
    private double integral = 0;
}
</code>
                                </pre>
                                <pre class="kotlin-code" style="display: none;">
<code>
class PIDController(private val kP: Double, private val kI: Double, private val kD: Double) {
    private var previousError = 0.0
    private var integral = 0.0
}
</code>
                                </pre>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 5 -->
                <div class="accordion-item">
                    <h2 class="accordion-header" id="step5Header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#step5" aria-expanded="false" aria-controls="step5">
                            Step 5: Constructor
                        </button>
                    </h2>
                    <div id="step5" class="accordion-collapse collapse" aria-labelledby="step5Header" data-bs-parent="#pidWalkthrough">
                        <div class="accordion-body">
                            <p>Create a constructor to initialize the PID constants.</p>
                            <div class="code-box border rounded p-3 bg-light">
                                <pre class="java-code" style="display: block;">
<code>
public class PIDController {
    private double kP, kI, kD;
    private double previousError = 0;
    private double integral = 0;

    public PIDController(double kP, double kI, double kD) {
        this.kP = kP;
        this.kI = kI;
        this.kD = kD;
    }
}
</code>
                                </pre>
                                <pre class="kotlin-code" style="display: none;">
<code>
class PIDController(private val kP: Double, private val kI: Double, private val kD: Double) {
    private var previousError = 0.0
    private var integral = 0.0

    init {
        // Initialization logic if needed
    }
}
</code>
                                </pre>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 6 -->
                <div class="accordion-item">
                    <h2 class="accordion-header" id="step6Header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#step6" aria-expanded="false" aria-controls="step6">
                            Step 6: Calculate PID Output
                        </button>
                    </h2>
                    <div id="step6" class="accordion-collapse collapse" aria-labelledby="step6Header" data-bs-parent="#pidWalkthrough">
                        <div class="accordion-body">
                            <p>Implement the method to calculate the PID output based on the target and current values.</p>
                            <div class="code-box border rounded p-3 bg-light">
                                <pre class="java-code" style="display: block;">
<code>
public class PIDController {
    private double kP, kI, kD;
    private double previousError = 0;
    private double integral = 0;

    public PIDController(double kP, double kI, double kD) {
        this.kP = kP;
        this.kI = kI;
        this.kD = kD;
    }

    public double calculate(double target, double current) {
        double error = target - current; // Calculate the error
        integral += error; // Accumulate the error for the integral term
        double derivative = error - previousError; // Calculate the rate of change of error
        previousError = error; // Update the previous error
        return (kP * error) + (kI * integral) + (kD * derivative); // Compute the PID output
    }
}
</code>
                                </pre>
                                <pre class="kotlin-code" style="display: none;">
<code>
class PIDController(private val kP: Double, private val kI: Double, private val kD: Double) {
    private var previousError = 0.0
    private var integral = 0.0

    fun calculate(target: Double, current: Double): Double {
        val error = target - current // Calculate the error
        integral += error // Accumulate the error for the integral term
        val derivative = error - previousError // Calculate the rate of change of error
        previousError = error // Update the previous error
        return (kP * error) + (kI * integral) + (kD * derivative) // Compute the PID output
    }
}
</code>
                                </pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const themeToggle = document.getElementById('theme-toggle');
            const savedTheme = localStorage.getItem('theme') || 'light-mode';

            document.body.classList.add(savedTheme);
            themeToggle.textContent = savedTheme === 'dark-mode' ? '⏾' : '☀';

            themeToggle.addEventListener('click', () => {
                const isDarkMode = document.body.classList.contains('dark-mode');
                document.body.classList.toggle('dark-mode', !isDarkMode);
                document.body.classList.toggle('light-mode', isDarkMode);
                themeToggle.textContent = isDarkMode ? '☀' : '⏾';
                localStorage.setItem('theme', isDarkMode ? 'light-mode' : 'dark-mode');
            });
        });
    </script>
</body>
</html>